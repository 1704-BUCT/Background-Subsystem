### api接口文档

#### 1.前言

1. 服务器地址：39.97.241.101
2. 用户名：Administrator
3. 密码：
4. （如果密码被和谐了来私聊我）
5. 目前服务器上已配置apach-tomcat、mysql。已有部分数据。
6. 以http://+ip+port+url的格式访问，如：http://39.97.241.101:8080/museum/{id}
7. 用url里用大括号{}括起来的表示直接写数据，如：http://39.97.241.101:8080/museum/1
8. 这里序号都从1开始，没有0号！
9. 返回数据里删除线的是还没实现返回的

#### 2.接口表

写完感觉服务和接口可能存在不对应的关系，请各组检查一下有没有自己需要的接口！！

2020.4.30	删去了大量不需要的接口，修改了很多  

2020.5.7 修改部分加粗了


#### 实体类

用户信息表-users
| 序号 | 字段          | 类型           | 默认值 | 是否NULL | PK   | FK   | 描述                         |
| ---- | ------------- | -------------- | ------ | -------- | ---- | ---- | ---------------------------- |
| 1    | uid           | int            |        | 否       | 是   | 否   | 用户编号                     |
| 2    | account       | varchar（30）  |        | 否       | 否   | 否   | 账号                         |
| 3    | password      | varchar（30）  |        | 否       | 否   | 否   | 密码                         |
| 4    | name          | varchar（30）  |        | 是       | 否   | 否   | 姓名                         |
| 5    | grander       | varchar（10）  |        | 是       | 否   | 否   | 性别                         |
| 6    | birthday      | LocalDateTime  |        | 是       | 否   | 否   | 生日                         |
| 7    | email         | varchar（255） |        | 是       | 否   | 否   | 邮箱                         |
| 8    | mobile        | varchar（11）  |        | 是       | 否   | 否   | 手机                         |
| 9    | lasttime      | int（11）      |        | 是       | 否   | 否   | 最后登陆时间                 |
| 10   | logincount    | int（11）      |        | 是       | 否   | 否   | 登录次数                     |
| 11   | validstate    | int（11）      | 0      | 是       | 否   | 否   | 是否有效（0为有效，1为无效） |
| 12   | **avatarurl** | varchar(1000)  |        | 是       | 否   | 否   | 用户头像地址                 |



博物馆信息表-museums

| 序号 | 字段               | 类型            | 默认值 | 是否NULL | PK   | FK   | 描述         |
| ---- | ------------------ | --------------- | ------ | -------- | ---- | ---- | ------------ |
| 1    | mid                | int（11）       |        | 否       | 是   | 否   | 编号         |
| 2    | name               | varchar（255）  |        | 是       | 否   | 否   | 博物馆名     |
| 3    | introduction       | varchar（1000） |        | 是       | 否   | 否   | 基本介绍     |
| 4    | opentime           | varchar（100）  |        | 是       | 否   | 否   | 开放时间     |
| 5    | avgexhibitionstar  | double          | 0      | 否       | 否   | 否   | 平均展览分数 |
|      | avgenvironmentstar | double          | 0      | 否       | 否   | 否   | 平均环境分数 |
|      | avgservicestar     | double          | 0      | 否       | 否   | 否   | 平均服务分数 |
| 6    |                    |                 |        |          |      |      |              |
|      |                    |                 |        |          |      |      |              |
| 8    | address            | varchar（255）  |        | 是       | 否   | 否   | 博物馆地址   |



管理员表-admins

| 序号 | 字段       | 类型           | 默认值 | 是否NULL | PK   | FK   | 描述                             |
| ---- | ---------- | -------------- | ------ | -------- | ---- | ---- | -------------------------------- |
| 1    | aid        | int（11）      |        | 否       | 是   | 否   | 编号                             |
| 2    | account    | varchar（30）  |        | 否       | 否   | 否   | 账户                             |
| 3    | name       | varchar（30）  |        | 否       | 否   | 否   | 昵称                             |
| 4    | password   | varchar（30）  |        | 否       | 否   | 否   | 密码                             |
| 5    | email      | varchar（255） |        | 是       | 否   | 否   | 邮箱                             |
| 6    | mobile     | varchar（11）  |        | 是       | 否   | 否   | 手机                             |
| 7    | lasttime   | int（11）      |        | 是       | 否   | 否   | 最后登陆时间                     |
| 8    | logincount | int（11）      |        | 是       | 否   | 否   | 登录次数                         |
| 9    | role       | int（11）      |        | 否       | 否   | 否   | 角色，0为系统管理员，1内容管理员 |
| 10   | validstate | int（11）      | 0      | 是       | 否   | 否   | 是否有效（0表有效，1为无效）     |



展览表-exhibitions

| 序号 | 字段         | 类型                | 默认值 | 是否NULL | PK   | FK   | 描述         |
| ---- | ------------ | ------------------- | ------ | -------- | ---- | ---- | ------------ |
| 1    | eid          | int（11）           |        | 否       | 是   | 否   | 序号         |
| 2    | mid          | int（11）           |        | 否       | 否   | 是   | 博物馆序号   |
| 3    | name         | varchar（100）      |        | 否       | 否   | 否   | 展览名称     |
| 4    | time         | varchar（100）      |        | 是       | 否   | 否   | 展览时间     |
| 7    | imgurl       | **varchar（1000）** |        | 是       | 否   | 否   | 展览图片地址 |
| 5    | address      | varchar（255）      |        | 是       | 否   | 否   | 展览地点     |
| 6    | introduction | varchar（1000）     |        | 是       | 否   | 否   | 展览介绍     |
| 7    | mname        | varchar（100）      |        | 是       | 否   | 否   | 所属博物馆   |



藏品表-collections

| 序号 | 字段         | 类型              | 默认值 | 是否NULL | PK   | FK   | 描述                   |
| ---- | ------------ | ----------------- | ------ | -------- | ---- | ---- | ---------------------- |
| 1    | cid          | int(11)           |        | 否       | 是   | 否   | 序号                   |
| 2    | name         | varchar(255)      |        | 否       | 否   | 否   | 藏品名                 |
| 3    | indroduction | varchar(1000)     |        | 是       | 否   | 否   | 藏品介绍               |
| 4    | imgurl       | **varchar(1000)** |        | 是       | 否   | 否   | 图片服务器文件夹的路径 |
| 5    | museum       | varchar(255)      |        | 是       | 否   | 否   | 所属博物馆的名字       |




日志表-logs-**可由赵自己设计**

| 序号 | 字段         | 类型           | 默认值 | 是否NULL | PK   | FK   | 描述               |
| ---- | ------------ | -------------- | ------ | -------- | ---- | ---- | ------------------ |
| 1    | lid          | int（11）      |        | 否       | 是   | 否   | 序号               |
|      |              |                |        |          |      |      |                    |
| 3    | operator     | varchar（30）  |        | 否       | 否   | 是   | 对应admin的account |
| 4    | description  | varchar（255） |        | 否       | 否   | 否   | 记录操作           |
| 5    | operatortime | LocalDateTime  |        | 否       | 否   | 否   | 操作时间           |
| 6    | ip           | varchar（30）  |        | 否       | 否   | 否   | 操作者地址         |
| 7    | status       | int（11）      |        | 否       | 否   | 否   | 操作完成状态       |



新闻表-news**蒋写新闻的接口**

| 序号 | 字段        | 类型                | 默认值 | 是否NULL | PK   | FK   | 描述                       |
| ---- | ----------- | ------------------- | ------ | -------- | ---- | ---- | -------------------------- |
| 1    | nid         | int（11）           |        | 否       | 是   | 否   | 序号                       |
| 2    | title       | varchar（100）      |        | 否       | 否   | 否   | 标题                       |
| 3    | extract     | varchar（255）      |        | 是       | 否   | 否   | 摘要，显示在新闻列表格     |
| 4    | content     | varchar（3000）     |        | 是       | 否   | 否   | 新闻正文                   |
|      | url         | **varchar（255）**  |        | 是       | 否   | 否   | 新闻源地址                 |
| 6    | imgurl      | **varchar（1000）** |        | 是       | 否   | 否   | 图片地址                   |
| 7    | author      | varchar（255）      |        | 是       | 否   | 否   | 新闻作者                   |
| 8    | releasetime | LocalDateTime       |        | 是       | 否   | 否   | 发布时间                   |
| 9    |             |                     |        |          |      |      |                            |
| 10   |             |                     |        |          |      |      |                            |
| 11   | nature      | int（11）           | 0      | 否       | 否   | 否   | 1正面，2负面               |
| 12   | **sign**    | varchar（1000）     |        | 是       | 否   | 否   | 有关系的博物馆，以逗号隔开 |



新闻与博物馆关系表-nmrs（News and Museums Relations）

| 序号 | 字段 | 类型      | 默认值 | 是否NULL | PK   | FK   | 描述       |
| ---- | ---- | --------- | ------ | -------- | ---- | ---- | ---------- |
| 1    | id   | int（11） |        | 否       | 是   | 否   | 序号       |
| 2    | nid  | int（11） |        | 否       | 否   | 是   | 新闻序号   |
| 3    | mid  | int（11） |        | 否       | 否   | 是   | 博物馆序号 |



**目前设计展览、教育活动指属于一个博物馆，用户只能对一个博物馆进行一次评论、打分。**

展览和博物馆关系表-exmrs(Exhibition and Museums Relations)

~~展览和博物馆关系表-exmrs(Exhibition and Museums Relations)~~

| 序号 | 字段 | 类型    | 默认值 | 是否NULL | PK   | FK   | 描述       |
| ---- | ---- | ------- | ------ | -------- | ---- | ---- | ---------- |
| 1    | id   | int(11) |        | 否       | 是   | 否   | 序号       |
| 2    | eid  | int(11) |        | 否       | 否   | 是   | 展览序号   |
| 3    | mid  | int(11) |        | 否       | 否   | 是   | 博物馆序号 |



~~教育和博物馆关系表-edmrs(Education and Museums Relations)~~

| 序号 | 字段 | 类型    | 默认值 | 是否NULL | PK   | FK   | 描述       |
| ---- | ---- | ------- | ------ | -------- | ---- | ---- | ---------- |
| 1    | id   | int(11) |        | 否       | 是   | 否   | 序号       |
| 2    | eid  | int(11) |        | 否       | 否   | 是   | 教育活动序号  |
| 3    | mid  | int(11) |        | 否       | 否   | 是   | 博物馆序号 |



~~评论和博物馆关系表-(Comment and Museum Relations)~~

| 序号 | 字段 | 类型    | 默认值 | 是否NULL | PK   | FK   | 描述       |
| ---- | ---- | ------- | ------ | -------- | ---- | ---- | ---------- |
| 1    | id   | int(11) |        | 否       | 是   | 否   | 序号       |
| 2    | cid  | int(11) |        | 否       | 否   | 是   | 评论序号  |
| 3    | mid  | int(11) |        | 否       | 否   | 是   | 博物馆序号 |



~~打分表-museumStars~~

| 序号 | 字段            | 类型      | 默认值 | 是否NULL | PK   | FK   | 描述              |
| ---- | --------------- | --------- | ------ | -------- | ---- | ---- | ----------------- |
| 1    | id              | int（11） |        | 否       | 是   | 否   | 序号              |
| 2    | uid             | int（11） |        | 否       | 否   | 是   | 用户id            |
| 3    | mid             | int（11） |        | 否       | 否   | 是   | 博物馆id          |
| 4    | exhibitionstar  | int（11） |        | 否       | 否   | 否   | 展览分数（1-5分） |
| 5    | servicestar     | int（11） |        | 否       | 否   | 否   | 服务分数（1-5分） |
| 6    | environmentstar | int（11） |        | 否       | 否   | 否   | 环境分数（1-5分） |



评论表-comments

| 序号  | 字段            | 类型                | 默认值 | 是否NULL | PK   | FK   | 描述                  |
| ----- | --------------- | ------------------- | ------ | -------- | ---- | ---- | --------------------- |
| 1     | id              | int（11）           |        | 否       | 是   | 否   | 序号                  |
| 2     | uid             | int（11）           |        | 否       | 否   | 是   | 用户id                |
| ~~3~~ |                 |                     |        |          |      |      |                       |
| 4     | mid             | int（11）           |        | 否       | 否   | 是   | 博物馆id              |
| ~~5~~ |                 |                     |        |          |      |      |                       |
| ~~6~~ | environmentstar | int（11）           |        | 否       | 否   | 是   | 博物馆环境打分（1-5） |
|       | servicestar     | int（11）           |        | 否       | 否   | 否   | 服务分数（1-5分）     |
|       | exhibitionstar  | int（11）           |        | 否       | 否   | 否   | 展览分数（1-5分）     |
| 7     | content         | varchar（1000）     |        | 否       | 否   | 否   | 评论内容              |
| 8     | time            | varchar（20）       |        | 否       | 否   | 否   | 评论时间              |
| 9     | imgurl          | **varchar（1000）** |        | 是       | 否   | 否   | 图片地址              |
|       |                 |                     |        |          |      |      |                       |



藏品讲解表-collection_explation

| 序号 | 字段         | 类型              | 默认值 | 是否NULL | PK   | FK   | 描述       |
| ---- | ------------ | ----------------- | ------ | -------- | ---- | ---- | ---------- |
| 1    | id           | int(11)           |        | 否       | 是   | 否   | 序号       |
| 2    | imgurl       | **varchar(1000)** |        | 是       | 否   | 否   | 讲解图片   |
| 3    | soundurl     | **varchar(1000)** |        | 是       | 否   | 否   | 讲解音频   |
| 4    | introduction | varchar（1000）   |        | 是       | 否   | 否   | 讲解文字   |
|      | uid          | int（11）         |        | 否       | 否   | 是   | 用户id     |
| 6    | cid          | int(11)           |        | 否       | 否   | 是   | 藏品id     |
| 7    | mid          | int(11)           |        | 否       | 否   | 是   | 属于博物馆 |



展览讲解表-exhibition_explation

| 序号 | 字段         | 类型              | 默认值 | 是否NULL | PK   | FK   | 描述       |
| ---- | ------------ | ----------------- | ------ | -------- | ---- | ---- | ---------- |
| 1    | id           | int(11)           |        | 否       | 是   | 否   | 序号       |
| 2    | imgurl       | **varchar(1000)** |        | 是       | 否   | 否   | 讲解图片   |
| 3    | soundurl     | **varchar(1000)** |        | 是       | 否   | 否   | 讲解音频   |
| 4    | introduction | varchar（1000）   |        | 是       | 否   | 否   | 讲解文字   |
| 5    | uid          | int（11）         |        | 否       | 否   | 是   | 用户id     |
|      | eid          | int(11)           |        | 否       | 否   | 是   | 展览id     |
| 7    | mid          | int(11)           |        | 否       | 否   | 是   | 属于博物馆 |





教育活动表-education

| 序号 | 字段        | 类型                | 默认值 | 是否NULL | PK   | FK   | 描述                                  |
| ---- | ----------- | ------------------- | ------ | -------- | ---- | ---- | ------------------------------------- |
| 1    | oid         | int(11)             |        | 否       | 是   | 否   | 序号                                  |
| 2    | name        | varchar(100)        |        | 是       | 否   | 否   | 活动名称                              |
| 3    | imgurl      | **varchar（1000）** |        | 是       | 否   | 否   | 活动图片，url为在服务器中文件夹的名字 |
| 4    | mname       | varchar（255）      |        | 是       | 否   | 否   | 博物馆名                              |
| 5    | maddress    | varchar（255）      |        | 是       | 否   | 否   | 博物馆地址                            |
| 6    | itroduction | varchar（1000）     |        | 是       | 否   | 否   | 教育活动介绍                          |
| 7    | opentime    | varchar（100）      |        | 是       | 否   | 否   | 开展时间                              |

